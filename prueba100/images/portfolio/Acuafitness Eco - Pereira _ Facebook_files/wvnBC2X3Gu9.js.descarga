if (self.CavalryLogger) { CavalryLogger.start_js(["JVLD8"]); }

__d("legacy:focus",["Focus"],(function(a,b,c,d,e,f){a.Focus=b("Focus")}),3);
__d("PhotoInlineEditor",["csx","Arbiter","CSS","DOM","Event","Keys","Parent","PhotosConst","TextAreaControl","Tokenizer","$"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(b){this.viewer=b,a.instances[this.viewer.getVersionConst()]=this}var c=a.prototype;c.toggleEditMode=function(a,c){a=b("Parent").byClass(b("$")(a),"photoUfiContainer");if(!a)return;b("CSS").conditionClass(a,"inlineEditMode",c);this.viewer.getVersionConst()==b("PhotosConst").VIEWER_SNOWLIFT&&(c&&this.viewer.uncollapseRHC(),b("CSS").conditionClass(b("DOM").find(document.body,"._4d3w"),"fbPhotoSnowliftEditMode",c),b("Arbiter").inform("reflow"));if(c){c=b("DOM").scry(a,"._4ej textarea");c.length>0&&b("TextAreaControl").getInstance(c[0])}};c.activate=function(a){this.toggleEditMode(a,!0)};a.deactivateInstance=function(b,c){a.getInstance(b).deactivate(c)};c.deactivate=function(a){this.toggleEditMode(a,!1),this.arbiterToken&&this.arbiterToken.unsubscribe(),this.escListener&&(this.escListener.remove(),this.escListener=null),this.ogListener&&(this.ogListener.remove(),this.ogListener=null)};c.acceptSuggestion=function(a,c){var d=b("DOM").find(document.body,".uiTokenizer.uiInlineTokenizer");d=b("Tokenizer").getInstance(d);a={uid:a.getAttribute("data-id"),text:a.getAttribute("data-text")};d.addToken(d.createToken(a));d=b("DOM").find(document.body,"#video_face_"+c);b("CSS").hide(d)};c.rejectSuggestion=function(a,c){a=b("DOM").find(document.body,"#video_face_"+c);b("CSS").addClass(a,"taggingMode");b("CSS").hide(a)};c.cancel=function(a){this.deactivate(a),b("Arbiter").inform("PhotoInlineEditor.CANCEL_INLINE_EDITING")};c.addTagDetails=function(a,c){a=b("DOM").find(document.body,".uiTokenizer.uiInlineTokenizer");a=b("Tokenizer").getInstance(a);c={uid:c.subject,text:c.text};a.addToken(a.createToken(c))};c.attachForm=function(a){this._form=a;return this};c.getForm=function(){return this._form};c.subscribeTagging=function(){this.subscribe=b("Arbiter").subscribe("PhotoTagger.ADDING_TAG",this.addTagDetails.bind(),"new")};c.subscribeCancel=function(a){var c=[this.viewer.getEventString("PAGE"),this.viewer.getEventString("CLOSE")];this.arbiterToken=b("Arbiter").subscribe(c,this.cancel.bind(this,a),"new");this.escListener=b("Event").listen(document.documentElement,"keydown",function(c){b("Event").getKeyCode(c)===b("Keys").ESC&&this.cancel(a)}.bind(this))};c.registerOGToken=function(a,c){this.ogListener=b("Event").listen(a,"click",function(){b("DOM").remove(c)})};a.getInstance=function(b){return a.instances[b]};return a}();a.instances={};e.exports=a}),null);
__d("legacy:PhotoInlineEditor",["PhotoInlineEditor"],(function(a,b,c,d,e,f){a.PhotoInlineEditor=b("PhotoInlineEditor")}),3);
__d("legacy:PhotoSnowlift",["PhotoSnowlift"],(function(a,b,c,d,e,f){a.PhotoSnowlift=b("PhotoSnowlift")}),3);
__d("PhotosButtonTooltips",["Arbiter","DOMDimensions","Style","Tooltip"],(function(a,b,c,d,e,f){__p&&__p();var g=[],h=[],i;function j(a,c){__p&&__p();if(!a||!a.length||!c||!c.length||a.length!=c.length)throw new Error("Incorrect arguments passed in from PHP for photo button cropping");var d=0,e=[],f=!1;for(d=0;d<a.length;d++)e.push(b("DOMDimensions").getElementDimensions(a[d]).width),e[d]&&(f=!0);if(f){a.forEach(function(a){b("Style").set(a,"max-width","100%")});for(d=0;d<a.length;d++){var g=a[d],i=e[d];if(i){var j=b("DOMDimensions").getElementDimensions(g).width;j>i&&(b("Tooltip").set(g,c[d]),h.push(g))}}a.forEach(function(a){b("Style").set(a,"max-width","")})}return f}function k(){g.forEach(function(a){a.unsubscribe()}),g=[],h.forEach(b("Tooltip").remove),h=[]}function l(a,c,d){this.arbiterToken=b("Arbiter").subscribe(a,function(){j(c,d)&&(this.arbiterToken&&this.arbiterToken.unsubscribe())}.bind(this))}a={init:function(){i||(i=b("Arbiter").subscribe("PhotoSnowlift.CLOSE",k))},registerButtonsOnPaging:function(a,b){g.push(new l("PhotoSnowlift.DATA_CHANGE",a,b).arbiterToken)},registerButtonsOnTaggingOn:function(a,b){g.push(new l("PhotoTagger.START_TAGGING",a,b).arbiterToken)},registerButtonsOnTaggingOff:function(a,b){g.push(new l("PhotoTagger.STOP_TAGGING",a,b).arbiterToken)}};e.exports=a}),null);
__d("HideInlineHelp",[],(function(a,b,c,d,e,f){var g={};a={registerMenu:function(a,b,c){g[a]=b.setValue.bind(b,c)},triggerUndo:function(a){g[a]()}};e.exports=a}),null);
__d("MakeProfilePicInit",["ProfilePicCropViewerInit","URI"],(function(a,b,c,d,e,f){a={handleOptimus:function(a,c,d){d.preventDefault();a=new(b("URI"))(c.getAttribute("ajaxify")||c.getAttribute("href")).getQueryData();b("ProfilePicCropViewerInit").loadID(a.fbid,a.profile_id,{source:a.pp_source,stickerID:a.sticker_id})}};e.exports=a}),null);